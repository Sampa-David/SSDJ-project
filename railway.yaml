services:
  - name: ssdj-app
    source:
      type: github
      repo: Sampa-David/SSDJ-project
      branch: main
    buildCommand: bash ./bin/railway-deploy.sh
    startCommand: php -S 0.0.0.0:8080 -t public
    healthCheckUrl: /
    healthCheckInterval: 30
    port: 8080
    variables:
      APP_ENV: production
      APP_DEBUG: "false"
      APP_NAME: "SSDJ Event System"
      LOG_CHANNEL: stack
      LOG_LEVEL: error
      SESSION_DRIVER: database
      CACHE_DRIVER: database
      QUEUE_CONNECTION: database
      DB_CONNECTION: mysql
      DB_HOST: ssdj-db
      DB_PORT: "3306"
      DB_DATABASE: ssdj
      DB_USERNAME: root
      DB_PASSWORD: railway

  - name: ssdj-db
    source:
      type: mysql
      version: "8.0"
    variables:
      MYSQL_ROOT_PASSWORD: railway
      MYSQL_DATABASE: ssdj
